#!/bin/bash

git checkout master
(cd docs;
    rm -rf .build;
    make html;
    (cd .build/html;
        find . -type f -name "*.html" | \
            xargs perl -pi -e's/default\.css/agogo\.css/g';
        sphinx-to-github;))
git checkout gh-pages
cp -r docs/.build/html/* .
git commit . -m "Autogenerated documentation for github."
git push --all
git checkout master
